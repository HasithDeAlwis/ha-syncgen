-- PostgreSQL Replica Database Initialization
-- Generated from config.yaml

CREATE USER {{ .DbUser }} WITH PASSWORD '{{ .DbPassword }}' SUPERUSER;

-- Configure replica-specific settings
ALTER SYSTEM SET hot_standby = {{.HotStandby}};

-- Reload configuration
SELECT pg_reload_conf();

-- Log successful initialization
DO $$
BEGIN
    RAISE NOTICE 'Replica PostgreSQL database initialized successfully';
    RAISE NOTICE 'Admin user: {{.DbUser}}';
    RAISE NOTICE 'Replica slot: {{.ReplicationSlot}}';
END $$;
